function onImagesReady(t,e){let s=t.querySelectorAll("img"),l=0;s.length&&(s.forEach(t=>{t.complete?l++:t.addEventListener("load",()=>{++l===s.length&&e()})}),l!==s.length)||e()}function setOfferDescHeightAfterAjax(t){t=t.querySelectorAll(".offer-item");t.length&&(window.innerWidth<992?t.forEach(t=>t.style.removeProperty("--height-desc")):t.forEach(t=>{var e=t.querySelector(".content-desc");e&&t.style.setProperty("--height-desc",e.offsetHeight+"px")}))}function listPostFilter(){if(!($(".list-post-filter").length<1)){let i=$(".list-post-filter"),e="all",o=1,s=!1,a="filter_offers",r=(i.hasClass("new")?a="filter_news":i.hasClass("experience")&&(a="filter_experiences"),"number"==typeof window.EXPERIENCE_FILTER_LOCATION?window.EXPERIENCE_FILTER_LOCATION:"all");function l(t,l=1){s||(s=!0,$.ajax({url:ajaxUrl,type:"POST",data:{action:a,term:t,page:l,location:r},beforeSend(){$(".list-post-filter .list-post").addClass("is-loading")},success(e){if(e.success){var s=$(".list-post-filter");let t=$(".list-post-filter .list-post");t.html(e.data.posts),s.find(".pagination").remove(),t.after(e.data.pagination),i.hasClass("offer")&&onImagesReady(t[0],()=>{setOfferDescHeightAfterAjax(t[0])}),o=l}},complete(){$(".list-post-filter .list-post").removeClass("is-loading"),s=!1}}))}$(document).on("click",".list-post-filter .filter-button,.list-post-filter .dropdown-custom-item span",function(){var t=$(this).data("tab");console.log(t),t&&(e="all"===t?"all":t.replace("post-category-",""),o=1,$(".list-post-filter .filter-button").removeClass("active"),$('.list-post-filter .filter-button[data-tab="'+t+'"]').addClass("active"),l(e,1))}),$(document).on("click",".list-post-filter .pagination a",function(t){t.preventDefault();t=$(this).text();t&&l(e,parseInt(t))}),i.hasClass("experience")&&"all"!==r&&l("all",1)}}export{onImagesReady,setOfferDescHeightAfterAjax,listPostFilter};